<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>sed FAQ (ЧАВО)</title><link rel="stylesheet" href="chs/default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="Краткий учебник по sed."><link rel="up" href="ch02.html" title="Глава 2."><link rel="prev" href="ch02s04.html" title="BUGS (Ошибки в sed)."><link rel="next" href="ch02s06.html" title="Что нового в версии 4.2 по сравнению с 4.1.5?"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">sed FAQ (ЧАВО)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s04.html">Пред.</a> </td><th width="60%" align="center">Глава 2. </th><td width="20%" align="right"> <a accesskey="n" href="ch02s06.html">След.</a></td></tr></table><hr></div><div class="section" title="sed FAQ (ЧАВО)"><div class="titlepage"><div><div><h3 class="title"><a name="id2515955"></a><a name="faq"></a>sed FAQ (ЧАВО)</h3></div></div></div><div class="section" title="Q. Почему меняется не все, а только первое совпадение в строке?"><div class="titlepage"><div><div><h4 class="title"><a name="id2515963"></a>Q. Почему меняется не все, а только первое совпадение в строке?</h4></div></div></div><p>
				A. По умолчанию. На самом деле, часто именно это и надо.
			</p><p>
				Как сделать так, чтобы заменялись все совпадения написано <a class="link" href="ch02.html#first_g">здесь</a>.
			</p><p>
				Подробнее про команду <span class="command"><strong>s</strong></span> в <a class="link" href="ch06s03.html#info_s">info sed</a>.
			</p></div><div class="section" title="Q. Как инвертировать RE, например найти все строки, где НЕТ строки &#171;ABC&#187;?"><div class="titlepage"><div><div><h4 class="title"><a name="id2516002"></a>Q. Как инвертировать RE, например найти все строки, где НЕТ строки <span class="quote">&#171;<span class="quote">ABC</span>&#187;</span>?</h4></div></div></div><p>
				A. Никак. С помощью RE это сделать принципиально невозможно. Однако, sed так умеет: воспользуйтесь <a class="link" href="ch06s02.html#info_adr">адресным выражением</a>, например так:
				</p><pre class="programlisting">sed '/ABC/ ! { необходимые команды }'</pre><p>
			</p><p>
				Найти несовпадение в пределах одной строки несколько сложнее, используйте <a class="link" href="ch04s02.html#mark">маркёры</a>.
			</p></div><div class="section" title="Q. Почему выражение /.*XYZ/ работает не так, как мне хочется? (где тут не жадные выражения?)"><div class="titlepage"><div><div><h4 class="title"><a name="id2516049"></a>Q. Почему выражение /.*XYZ/ работает не так, как мне хочется? (где тут не жадные выражения?)</h4></div></div></div><p>
				Для повышения быстродействия все RE в sed жадные.
			</p><p>
				Однако, sed умеет выделять и с помощью не жадных квантификаторов. См. <a class="link" href="ch04s02.html#exx">здесь</a>.
			</p></div><div class="section" title="Q. Почему не работает символьный класс [а-я]? Почему команда s/.*// не стирает все символы?"><div class="titlepage"><div><div><h4 class="title"><a name="id2516078"></a>Q. Почему не работает символьный класс [а-я]? Почему команда s/.*// не стирает все символы?</h4></div></div></div><p>
				Это не баг, а фича. Подробнее см. <a class="link" href="ch02s04.html#bugs_utf">здесь</a>.
			</p><p>
				Q2. А что в маздае всё работало?
			</p><p>
				A2. Включите маздаевскую кодировку CP1251 (см. <a class="link" href="ch02s02.html#utf8">здесь</a>), заработает и в Linux. Кроме Ё конечно, она и в маздае не работает. А вот если вы в своём маздае используете юникод, то будет работать прям как в любой нормальной ОС, т.е. - не работать.
			</p></div><div class="section" title='Q. Почему команда sed -i редактирует файлы "только для чтения"?'><div class="titlepage"><div><div><h4 class="title"><a name="id2516125"></a>Q. Почему команда sed -i редактирует файлы "только для чтения"?</h4></div></div></div><p>
				Это тоже не баг, а фича. Подробнее см. <a class="link" href="ch02s04.html#bugs_i">здесь</a>.
			</p></div><div class="section" title="Q. Почему иногда срабатывает, а иногда не срабатывает команда перехода t?"><div class="titlepage"><div><div><h4 class="title"><a name="id2516145"></a>Q. Почему иногда срабатывает, а иногда не срабатывает команда перехода t?</h4></div></div></div><p>
				Потому, что команда <span class="command"><strong>s</strong></span> только устанавливает флаг перехода, но его не сбрасывает. Подробнее см. <a class="link" href="ch05.html#btT">здесь</a>.
			</p></div><div class="section" title="Q. Как обработать несколько строк сразу?"><div class="titlepage"><div><div><h4 class="title"><a name="id2516172"></a>Q. Как обработать несколько строк сразу?</h4></div></div></div><p>
				Вы уверенны, что хотите именно этого? Это возможно (см. <a class="link" href="ch04s13.html#pconf">пример</a>), однако на практике намного лучше и быстрее сделать по другому: при необходимости подгрузить к имеющейся строке ещё одну, а если надо - вывести уже обработанную строчку, причём так, что-бы необработанный хвост продолжал обрабатываться. См. <a class="link" href="ch04s07.html#t08">здесь</a>.
			</p></div><div class="blockquote"><blockquote class="blockquote"><p>
		Вы можете обсудить этот документ на <a class="ulink" href="http://emulek.tk/forum/viewtopic.php?f=19&amp;t=5026" target="_top">форуме</a>. Текст предоставляется по лицензии <a class="ulink" href="http://www.gnu.org/licenses/fdl.html" target="_top">GNU Free Documentation License</a> (<a class="ulink" href="http://forum.lorcode.org/viewtopic.php?f=15&amp;t=30" target="_top">Перевод лицензии GFDL</a>).
	</p><p>
		Вы можете пожертвовать небольшую сумму яндекс-денег на счёт <span class="command"><strong>41001666004238</strong></span> для оплаты хостинга, интернета, и прочего. Это конечно добровольно, однако это намного улучшит данный документ (у меня будет больше времени для его улучшения). На самом деле, проект часто находится на грани закрытия, ибо никаких денег никогда не приносил, и приносить не будет. Вы можете мне помочь. Спасибо.
	</p></blockquote></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s04.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Уровень выше</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s06.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">BUGS (Ошибки в sed). </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Что нового в версии 4.2 по сравнению с 4.1.5?</td></tr></table></div></body></html>
